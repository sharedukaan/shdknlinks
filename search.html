// STEP 3: Load and render product data in list view

async function loadProducts(tabName = "search-data") {
  const sheetID = "1z06jsVC54KkbyH_X3oGwmChEPyP1jrMl625LV5VP7Uw";
  const url = `https://opensheet.elk.sh/${sheetID}/${tabName}`;

  try {
    const res = await fetch(url);
    const data = await res.json();

    const filtered = data
      .filter(item => item.title && item.img && item.link)
      .sort((a, b) => Number(a.shuffleID) - Number(b.shuffleID));

    renderListView(filtered);
  } catch (err) {
    console.error("Error loading products:", err);
  }
}

function renderListView(products) {
  const container = document.getElementById("search-results");
  container.innerHTML = "";

  products.forEach(item => {
    const card = document.createElement("div");
    card.className = "product-card list-item";
    card.innerHTML = `
      <img src="${item.img}" alt="${item.title}" />
      <div>
        <h3>${item.title}</h3>
        <a href="${item.link}" target="_blank" rel="noopener">View</a>
      </div>
    `;
    container.appendChild(card);
  });
}
