<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ShoeDukaan | Product Details</title>
    <meta name="description" content="Discover the best shoes & accessories – all in one place. Shop smart with our mobile-first catalog and curated product grid.">
    <meta name="keywords" content="premium shoes, footwear catalog, mobile-first grid, Shoe Dukaan, vertical product images, curated shoes, online shoe store">
    <meta name="author" content="ShareDukaan">
    <link rel="canonical" href="https://shdkn.carrd.co">
    <meta name="robots" content="index, follow">
    <link rel="icon" href="shdkn_fav_p.png" type="image/png">
    <meta property="og:title" content="ShoeDukaan | Premium Footwear Catalog">
    <meta property="og:description" content="Discover the best shoes & accessories – all in one place. Shop smart with our mobile-first catalog and curated product grid.">
    <meta property="og:image" content="https://i.imgur.com/hp0QbkV.jpeg">
    <meta property="og:url" content="https://sharedukaan.github.io/shdknlinks/product.html">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="ShoeDukaan | Premium Footwear Catalog">
    <meta name="twitter:description" content="Discover the best shoes & accessories – all in one place. Shop smart with our mobile-first catalog and curated product grid.">
    <meta name="twitter:image" content="https://i.imgur.com/hp0QbkV.jpeg">
    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "WebSite",
            "name": "ShareDukaan",
            "url": "https://shdkn.carrd.co"
        }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Barlow:wght@500&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@400&display=swap" rel="stylesheet">
    <style>
        :root {
            --max-width: 1440px;
            --side-padding: 18px;
        }

        body {
            overflow-x: hidden;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', sans-serif;
            background: #1c1c1c;
            scroll-behavior: smooth;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .layout-container {
            max-width: var(--max-width);
            margin: 0 auto;
            padding: 0 var(--side-padding);
            box-sizing: border-box;
        }

        .wrapper {
            max-width: var(--max-width);
            margin: 0 auto;
            padding: 0 var(--side-padding);
        }

        /* Header */
        .top-banner {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            background-color: #333;
            color: #fff;
            padding: 12px var(--side-padding);
            position: relative;
        }

        .logo {
            width: 75px;
            height: auto;
            aspect-ratio: 1 / 1;
            object-fit: contain;
        }

        .header-right {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            text-align: center;
            flex: 1;
        }

        .tagline {
            font-family: 'Assistant', sans-serif;
            font-size: 12px;
            font-weight: 400;
            margin-bottom: 4px;
        }

        @media (min-width: 769px) {
            .tagline {
                white-space: normal;
                max-width: 320px;
                line-height: 1.4;
            }
        }

        .telegram-link {
            font-family: 'Assistant', sans-serif;
            font-size: 13px;
            color: #ffcc00;
            text-decoration: none;
            font-weight: 500;
        }

        .telegram-link:hover,
        .telegram-link:focus {
            transition: background-color 0.3s ease;
            color: inherit;
        }

        /* Navigation Bar */
        .nav-bar {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 6px;
            padding: 6px 0;
            background-color: rgba(30, 30, 30, 0.85);
            backdrop-filter: blur(8px);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            border-top: 1px solid #444;
            border-bottom: 1px solid #444;
        }

        .nav-list {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 8px;
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .nav-list li {
            display: flex;
            align-items: center;
        }

        .nav-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            width: 40px;
            height: 40px;
            text-decoration: none;
            font-family: 'Assistant', sans-serif;
            font-size: 12px;
            font-weight: 400;
            color: #BABABA;
            text-transform: uppercase;
            overflow: hidden;
            position: relative;
        }

        .nav-btn img {
            width: 40px;
            height: 40px;
            transition: transform 0.3s ease;
        }

        .nav-text {
            position: absolute;
            bottom: 0;
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
            font-size: 10px;
            color: #fff;
            text-align: center;
            width: 100%;
        }

        .nav-btn:hover img {
            transform: scale(0.7);
            transform-origin: top center;
        }

        .nav-btn:hover .nav-text {
            opacity: 1;
        }

        .nav-separator {
            color: #555;
            font-size: 14px;
            user-select: none;
        }

        .nav-btn.active img {
            transform: scale(0.7);
            transform-origin: top center;
        }

        .nav-btn.active .nav-text {
            opacity: 1;
            color: #fff;
        }

        /* Back to Top */
        #backToTop {
            position: fixed;
            bottom: 24px;
            right: 24px;
            z-index: 100;
            background-color: #ffcc00;
            color: #000;
            border: none;
            border-radius: 20px;
            padding: 10px 18px;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            display: none;
            transition: background-color 0.3s ease, transform 0.3s ease;
        }

        #backToTop:hover {
            background-color: #ffd633;
            transform: scale(1.05);
        }

        /* Footer */
        .footer-banner {
            width: 100%;
            background-color: #333;
            color: #BDB9B9;
            padding: 4px 0;
            border-top: 1px solid #3A3A3A;
            opacity: 0.85;
            margin-top: 40px;
        }

        .footer-content {
            text-align: center;
            font-family: 'Inter', sans-serif;
            font-weight: 300;
            font-size: 11px;
            line-height: 1.2;
        }

        .footer-tagline {
            font-weight: 500;
            margin-bottom: 4px;
        }

        .footer-branding {
            font-size: 12px;
            margin-bottom: 4px;
        }

        .footer-disclaimer {
            font-size: 12px;
            opacity: 0.85;
        }

        /* Product Page Specific Styles */
        .product-container {
            max-width: var(--max-width);
            margin: 30px auto;
            padding: 0 var(--side-padding);
            background: transparent;
        }

        .back-button {
            display: inline-flex;
            align-items: center;
            padding: 8px 18px 8px 0;
            background-color: rgba(30, 30, 30, 0.85);
            color: #BABABA;
            text-decoration: none;
            border-radius: 2px;
            font-family: 'Barlow', sans-serif;
            font-weight: 500;
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.3px;
            margin-bottom: 20px;
            transition: background-color 0.3s ease, opacity 0.3s ease;
        }

        .back-button:hover {
            color: #005fa3;
            background-color: #3B3B3B;
            opacity: 0.85;
        }

        .product-detail {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        @media (min-width: 768px) {
            .product-detail {
                grid-template-columns: minmax(0, 420px) 1fr;
            }
        }

        .product-image-container {
            position: relative;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.12);
            background: #333;
            aspect-ratio: 3 / 5;
            width: 100%;
            max-width: 420px;
            opacity: 0;
            transform: translateY(20px);
            margin: 0 auto;
        }

        .product-image-container.visible {
            animation: fadeInUp 0.6s ease forwards;
        }

        .product-image-container .carousel {
            position: relative;
            width: 100%;
            height: 100%;
            overflow: hidden;
            border-radius: 8px;
            background: #333;
        }

        .product-image-container .carousel img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0;
            transition: opacity 0.6s ease;
        }

        .product-image-container .carousel img.active {
            opacity: 1;
            z-index: 1;
        }

        .product-image-container .carousel img.active:hover {
            filter: brightness(1.08);
            transition: filter 0.3s ease;
        }

        .product-info {
            padding: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .product-title {
            font-family: 'Inter', sans-serif;
            font-weight: 300;
            font-size: 0.95em;
            color: #BABABA;
            margin: 15px 0;
            line-height: 1.1;
            text-align: left;
        }

        .product-description {
            font-family: 'Inter', sans-serif;
            font-weight: 300;
            font-size: 0.95em;
            color: #BABABA;
            line-height: 1.4;
            text-align: left;
            margin-bottom: 15px;
        }

        .product-price {
            font-family: 'Inter', sans-serif;
            font-weight: 300;
            font-size: 0.95em;
            color: #ffcc00;
            text-align: left;
            margin-bottom: 20px;
        }

        .buy-divider {
            width: 90%;
            height: 1px;
            background-color: #BDB9B9;
            margin: 20px 0;
            border: none;
            opacity: 0.5;
        }

        .product-actions {
            display: flex;
            gap: 10px;
            width: 100%;
            margin-left: -6px;
            box-sizing: border-box;
        }

        .buy-button,
        .share-button {
            margin-top: 5px;
            padding: 8px 18px 8px 0;
            background-color: rgba(30, 30, 30, 0.85);
            color: #BABABA;
            text-decoration: none;
            border-radius: 2px;
            transition: background-color 0.3s ease, opacity 0.3s ease;
            align-self: flex-start;
            border: none;
            cursor: pointer;
            font-family: 'Barlow', sans-serif;
            font-weight: 500;
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.3px;
        }

        .buy-button:hover,
        .share-button:hover {
            color: #005fa3;
            background-color: #3B3B3B;
            opacity: 0.85;
        }

        .product-features {
            margin: 15px 0;
            padding: 0;
            list-style: none;
        }

        .product-features li {
            padding: 5px 0;
            font-family: 'Inter', sans-serif;
            font-size: 0.95em;
            color: #BABABA;
            position: relative;
            padding-left: 20px;
            text-align: left;
            line-height: 1.4;
        }

        .product-features li:before {
            content: "✓";
            position: absolute;
            left: 0;
            color: #ffcc00;
        }

        .product-meta {
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid #3A3A3A;
            font-family: 'Inter', sans-serif;
            font-size: 0.95em;
            color: #BABABA;
            text-align: left;
        }

        .similar-products {
            margin-top: 40px;
        }

        .section-title {
            font-family: 'Inter', sans-serif;
            font-weight: 300;
            font-size: 0.95em;
            color: #BABABA;
            margin-bottom: 20px;
            text-align: left;
            position: relative;
            padding-bottom: 10px;
        }

        .section-title:after {
            content: "";
            position: absolute;
            bottom: 0;
            left: 0;
            width: 50px;
            height: 1px;
            background-color: #3A3A3A;
            opacity: 0.5;
        }

        .products-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 5px;
            padding: 8px 0;
            width: 100%;
            background-color: #1c1c1c;
        }

        @media (min-width: 1024px) {
            .products-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        .product-card {
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            padding: 6px;
            width: 100%;
            max-width: 420px;
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.12);
            box-sizing: border-box;
            aspect-ratio: 3 / 5;
            overflow: hidden;
            opacity: 0;
            transform: translateY(20px);
        }

        .product-card.visible {
            animation: fadeInUp 0.6s ease forwards;
        }

        .product-card:hover {
            transform: scale(1.03);
            box-shadow: 0 10px 24px rgba(0, 0, 0, 0.16);
        }

        .product-card .carousel {
            position: relative;
            width: 100%;
            height: 60%;
            overflow: hidden;
            border-radius: 8px;
            background: #333;
        }

        .product-card .carousel img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0;
            transition: opacity 0.6s ease;
        }

        .product-card .carousel img.active {
            opacity: 1;
            z-index: 1;
        }

        .product-card .carousel img.active:hover {
            filter: brightness(1.08);
            transition: filter 0.3s ease;
        }

        .product-card-title {
            font-family: 'Inter', sans-serif;
            font-weight: 300;
            font-size: 0.95em;
            color: #BABABA;
            margin-top: 15px;
            line-height: 1.1;
            text-align: center;
            max-width: 90%;
            margin: 0 auto;
        }

        .product-card-price {
            font-family: 'Inter', sans-serif;
            font-weight: 300;
            font-size: 0.95em;
            color: #ffcc00;
            text-align: center;
            margin: 8px 0;
        }

        .product-card-actions {
            padding: 0;
            width: 100%;
            margin-top: 10px;
        }

        .product-card-link {
            display: block;
            padding: 8px 18px 8px 0;
            background-color: rgba(30, 30, 30, 0.85);
            color: #BABABA;
            text-decoration: none;
            border-radius: 2px;
            transition: background-color 0.3s ease, opacity 0.3s ease;
            text-align: center;
            font-family: 'Barlow', sans-serif;
            font-weight: 500;
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.3px;
        }

        .product-card-link:hover {
            color: #005fa3;
            background-color: #3B3B3B;
            opacity: 0.85;
        }

        .product-card-link img {
            display: inline-block;
            vertical-align: middle;
            margin-right: 10px;
        }
    </style>
    </head>
    <body>
    <div class="wrapper">
        <header class="top-banner layout-container">
            <div class="header-left">
                <img src="https://i.imgur.com/hp0QbkV.jpeg" alt="ShareDukaan Logo" class="logo">
            </div>
            <div class="header-right">
                <p class="tagline">Discover The Best Shoes & Accessories – All in One Place | Shop Smart!!</p>
                <a href="https://t.me/sharedukaan" class="telegram-link">For daily updates 👉 Telegram</a>
            </div>
        </header>
        <nav class="nav-bar layout-container" role="navigation" aria-label="Main site navigation">
            <ul class="nav-list">
                <li>
                    <a href="index.html" class="nav-btn">
                        <img src="assets/Home_P.png" alt="Explore" width="40" height="40" />
                        <span class="nav-text">Explore</span>
                    </a>
                </li>
                <li><span class="nav-separator">|</span></li>
                <li>
                    <a href="forhim.html" class="nav-btn">
                        <img src="assets/Men_P.png" alt="For Him" width="40" height="40" />
                        <span class="nav-text">For Him</span>
                    </a>
                </li>
                <li><span class="nav-separator">|</span></li>
                <li>
                    <a href="forher.html" class="nav-btn">
                        <img src="assets/Women_P.png" alt="For Her" width="40" height="40" />
                        <span class="nav-text">For Her</span>
                    </a>
                </li>
                <li><span class="nav-separator">|</span></li>
                <li><a href="https://shoedukaan.blogspot.com" class="nav-btn">Blog >></a></li>
            </ul>
        </nav>
        <div id="product-container" class="product-container">
            <div class="error-message" id="loadingMessage">
                <span class="loading-spinner"></span> Loading product...
            </div>
        </div>
        <section class="similar-products layout-container">
            <h2 class="section-title">You might also like</h2>
            <main id="similarProductsGrid" class="products-grid">
                <div class="error-message" id="similarProductsLoading">
                    Loading similar products...
                </div>
            </main>
        </section>
    </div>
    <button id="backToTop" title="Back to Top">Top</button>
    <footer class="footer-banner">
        <div class="layout-container">
            <div class="footer-content">
                <p class="footer-tagline">Inspired by Google Keep's brilliant simplicity</p>
                <p class="footer-branding">© 2025 ShareDukaan. All rights reserved.</p>
                <p class="footer-disclaimer">Disclaimer: ShareDukaan is a participant in the Amazon Associates Program. We may earn a small commission when you purchase through affiliate links, at no extra cost to you. Product prices and availability are subject to change. The actual product may differ slightly from the images shown above.</p>
            </div>
        </div>
    </footer>
    <script>
        const sheetID = "1z06jsVC54KkbyH_X3oGwmChEPyP1jrMl625LV5VP7Uw";
        let allProducts = [];
        const batchSize = 12;

        function updateMetaTags(product) {
            document.title = product.title + " | ShoeDukaan";

            const head = document.head || document.getElementsByTagName('head')[0];
            const updateMeta = (property, content) => {
                let tag = document.querySelector(`meta[property="${property}"]`);
                if (!tag) {
                    tag = document.createElement('meta');
                    tag.setAttribute('property', property);
                    head.appendChild(tag);
                }
                tag.setAttribute('content', content);
            };

            const imageArray = product.img.split(',');
            const firstImage = imageArray[0].trim();

            updateMeta('og:title', product.title);
            updateMeta('og:description', product.title);
            updateMeta('og:image', firstImage);
            updateMeta('og:url', window.location.href);
            updateMeta('og:type', 'product');

            let canonicalLink = document.querySelector('link[rel="canonical"]');
            if (canonicalLink) {
                canonicalLink.setAttribute('href', window.location.href);
            }

            // Also update Twitter tags for consistency
            document.querySelector('meta[name="twitter:title"]').setAttribute('content', product.title);
            document.querySelector('meta[name="twitter:description"]').setAttribute('content', product.title);
            document.querySelector('meta[name="twitter:image"]').setAttribute('content', firstImage);
        }

        function renderProductDetail(product) {
            const container = document.getElementById("product-container");
            container.innerHTML = `
                <a href="javascript:history.back()" class="back-button">
                    <img src="assets/Left_P.png" alt="Back" style="width: 24px; margin-right: 8px;"> Back
                </a>
                <div class="product-detail">
                    <div class="product-image-container visible">
                        <div class="carousel">
                            ${product.img.split(',').map((image, index) => `<img src="${image.trim()}" alt="${product.title}" class="${index === 0 ? 'active' : ''}" />`).join('')}
                        </div>
                    </div>
                    <div class="product-info">
                        <h1 class="product-title">${product.title.replace(/\n/g, '<br>')}</h1>
                        <p class="product-price">${product.price}</p>
                        <hr class="buy-divider">
                        <div class="product-actions">
                            <a class="buy-button" href="${product.link}" target="_blank">
                                <img src="assets/Cart_P.png" alt="Buy Now" style="width: 24px; margin-right: 8px; vertical-align: middle;"> BUY NOW
                            </a>
                            <button class="share-button" data-title="${escapeQuotes(product.title)}" data-image="${escapeQuotes(product.img)}" data-url="${escapeQuotes(product.link)}" data-id="${escapeQuotes(product.permanentId)}">
                                <img src="assets/Share_P.png" alt="Share" style="width: 24px; vertical-align: middle;"> SHARE
                            </button>
                        </div>
                    </div>
                </div>
            `;
            // Hide the loading message once content is loaded
            document.getElementById('loadingMessage').style.display = 'none';
        }

        function generateCardHTML(item) {
            const imageArray = item.img.split(',');
            const firstImage = imageArray[0].trim();
            const productPageUrl = `product.html?permanentId=${item.permanentId}&source=${item.source}`;
            return `
                <div class="product-card visible" data-id="${item.permanentId}" data-source="${item.source}">
                    <a href="${productPageUrl}">
                        <img src="${firstImage}" alt="${item.title}" class="product-image" />
                    </a>
                    <h2 class="product-card-title">${item.title.replace(/\n/g, '<br>')}</h2>
                    <p class="product-card-price">${item.price}</p>
                </div>
            `;
        }

        async function loadProductDetailAndSimilar() {
            try {
                const urlParams = new URLSearchParams(window.location.search);
                const permanentId = urlParams.get('permanentId');
                const source = urlParams.get('source');

                if (!permanentId || !source) {
                    document.getElementById('loadingMessage').textContent = 'Product not found. Invalid link.';
                    document.getElementById('similarProductsLoading').textContent = ''; // Hide loading message for similar products
                    return;
                }

                // Fetch all products from the source
                const url = `https://opensheet.elk.sh/${sheetID}/${source}`;
                const res = await fetch(url);
                if (!res.ok) {
                    document.getElementById('loadingMessage').textContent = 'Error loading product data.';
                    return;
                }
                allProducts = await res.json();

                // Find the main product
                const mainProduct = allProducts.find(item => String(item.permanentId) === permanentId);
                
                if (!mainProduct) {
                    document.getElementById('loadingMessage').textContent = 'Product not found.';
                    document.getElementById('similarProductsLoading').textContent = '';
                    return;
                }

                // Render the main product and update meta tags
                renderProductDetail(mainProduct);
                updateMetaTags(mainProduct);

                // Filter out the main product for the "You might also like" section
                const similarProducts = allProducts.filter(item => String(item.permanentId) !== permanentId);
                
                // Render similar products
                const similarGrid = document.getElementById('similarProductsGrid');
                similarGrid.innerHTML = '';
                if (similarProducts.length > 0) {
                    similarProducts.forEach(product => {
                        similarGrid.innerHTML += generateCardHTML(product);
                    });
                } else {
                    similarGrid.innerHTML = '<p class="error-message" style="color:white;">No similar products found.</p>';
                }
                
                document.getElementById('similarProductsLoading').style.display = 'none';
                
            } catch (err) {
                console.error("Failed to load product details:", err);
                document.getElementById('loadingMessage').textContent = 'Error loading details. Please check your connection.';
                document.getElementById('similarProductsLoading').textContent = '';
            }
        }

        // Utility function to escape quotes
        function escapeQuotes(str) {
            return String(str).replace(/"/g, '&quot;');
        }

        // Share product function
        async function shareProduct(title, image, buyUrl, permanentId) {
            const urlParams = new URLSearchParams(window.location.search);
            const source = urlParams.get('source');
            const productPageUrl = `https://sharedukaan.github.io/shdknlinks/product.html?permanentId=${permanentId}&source=${source}`;
            
            const shareData = {
                title: title,
                text: `Check out ${title} on ShoeDukaan!`,
                url: productPageUrl
            };

            if (navigator.share) {
                try {
                    await navigator.share(shareData);
                } catch (error) {
                    if (error.name !== 'AbortError') {
                        console.error('Error sharing:', error);
                        copyToClipboard(productPageUrl, title);
                    }
                }
            } else {
                copyToClipboard(productPageUrl, title);
            }
        }

        // Clipboard fallback for sharing
        function copyToClipboard(text, productTitle) {
            navigator.clipboard.writeText(text).then(() => {
                alert(`Link for "${productTitle}" copied to clipboard!`);
            }).catch(err => {
                console.error('Could not copy text: ', err);
                prompt('Copy this URL to share:', text);
            });
        }
        
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('share-button') || e.target.closest('.share-button')) {
                const button = e.target.closest('.share-button');
                const title = button.dataset.title;
                const image = button.dataset.image;
                const buyUrl = button.dataset.url;
                const permanentId = button.dataset.id;
                shareProduct(title, image, buyUrl, permanentId);
            }
        });

        window.addEventListener("DOMContentLoaded", loadProductDetailAndSimilar);

        // Back to top button functionality
        window.addEventListener("scroll", () => {
            const scrollY = window.scrollY;
            const backToTopBtn = document.getElementById("backToTop");
            if (backToTopBtn) {
                backToTopBtn.style.display = scrollY > 300 ? "block" : "none";
            }
        });
        document.getElementById("backToTop").addEventListener("click", () => {
            window.scrollTo({ top: 0, behavior: "smooth" });
        });
    </script>
</body>
                    </html>
