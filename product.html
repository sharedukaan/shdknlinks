<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ShoeDukaan | Product Details</title>
<meta name="description" content="Discover the best shoes & accessories – all in one place. Shop smart with our mobile-first catalog and curated product grid.">
<meta name="keywords" content="premium shoes, footwear catalog, mobile-first grid, Shoe Dukaan, vertical product images, curated shoes, online shoe store">
<meta name="author" content="ShareDukaan">
<link rel="canonical" href="https://shdkn.carrd.co">
<meta name="robots" content="index, follow">
<link rel="icon" href="shdkn_fav_p.png" type="image/png">
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": "ShareDukaan",
  "url": "https://shdkn.carrd.co"
}
</script>
<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Barlow:wght@500&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Assistant:wght@400&display=swap" rel="stylesheet">

<style>
:root {
  --max-width: 1440px;
  --side-padding: 18px;
}

body {
  overflow-x: hidden;
  margin: 0;
  padding: 0;
  font-family: 'Segoe UI', sans-serif;
  background: #1c1c1c;
  scroll-behavior: smooth;
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.layout-container {
  max-width: var(--max-width);
  margin: 0 auto;
  padding: 0 var(--side-padding);
  box-sizing: border-box;
}

.wrapper {
  max-width: var(--max-width);
  margin: 0 auto;
  padding: 0 var(--side-padding);
}

/* Header */
.top-banner {
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
  background-color: #333;
  color: #fff;
  padding: 12px var(--side-padding);
  position: relative;
}

.logo {
  width: 75px;
  height: auto;
  aspect-ratio: 1 / 1;
  object-fit: contain;
}

.header-right {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  text-align: center;
  flex: 1;
}

.tagline {
  font-family: 'Assistant', sans-serif;
  font-size: 12px;
  font-weight: 400;
  margin-bottom: 4px;
}

/* Desktop override */
@media (min-width: 769px) {
  .tagline {
    white-space: normal;
    max-width: 320px;
    line-height: 1.4;
  }
}

.telegram-link {
  font-family: 'Assistant', sans-serif;
  font-size: 13px;
  color: #ffcc00;
  text-decoration: none;
  font-weight: 500;
}

.telegram-link:hover,
.telegram-link:focus {
  transition: background-color 0.3s ease;
  color: inherit;
}

/* Navigation Bar */
.nav-bar {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 6px;
  padding: 6px 0;
  background-color: rgba(30, 30, 30, 0.85);
  backdrop-filter: blur(8px);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
  border-top: 1px solid #444;
  border-bottom: 1px solid #444;
}

/* Nav List */
.nav-list {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 8px;
  list-style: none;
  margin: 0;
  padding: 0;
}

/* Nav Item */
.nav-list li {
  display: flex;
  align-items: center;
}

/* Nav Button with Image + Text */
.nav-btn {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  width: 40px;
  height: 40px;
  text-decoration: none;
  font-family: 'Assistant', sans-serif;
  font-size: 12px;
  font-weight: 400;
  color: #BABABA;
  text-transform: uppercase;
  overflow: hidden;
  position: relative;
}

/* PNG Icon */
.nav-btn img {
  width: 40px;
  height: 40px;
  transition: transform 0.3s ease;
}

/* Text Label (hidden by default) */
.nav-text {
  position: absolute;
  bottom: 0;
  opacity: 0;
  transition: opacity 0.3s ease;
  pointer-events: none;
  font-size: 10px;
  color: #fff;
  text-align: center;
  width: 100%;
}

/* Hover Behavior */
.nav-btn:hover img {
  transform: scale(0.7);
  transform-origin: top center;
}

.nav-btn:hover .nav-text {
  opacity: 1;
}

/* Optional Separator */
.nav-separator {
  color: #555;
  font-size: 14px;
  user-select: none;
}

.nav-btn.active img {
  transform: scale(0.7);
  transform-origin: top center;
}

.nav-btn.active .nav-text {
  opacity: 1;
  color: #fff;
}

/* Back to Top */
#backToTop {
  position: fixed;
  bottom: 24px;
  right: 24px;
  z-index: 100;
  background-color: #ffcc00;
  color: #000;
  border: none;
  border-radius: 20px;
  padding: 10px 18px;
  cursor: pointer;
  box-shadow: 0 4px 8px rgba(0,0,0,0.3);
  display: none;
  transition: background-color 0.3s ease, transform 0.3s ease;
}

#backToTop:hover {
  background-color: #ffd633;
  transform: scale(1.05);
}

/* Footer */
.footer-banner {
  width: 100%;
  background-color: #333;
  color: #BDB9B9;
  padding: 4px 0;
  border-top: 1px solid #3A3A3A;
  opacity: 0.85;
  margin-top: 40px;
}

.footer-content {
  text-align: center;
  font-family: 'Inter', sans-serif;
  font-weight: 300;
  font-size: 11px;
  line-height: 1.2;
}
.footer-tagline {
  font-weight: 500;
  margin-bottom: 4px;
}

.footer-branding {
  font-size: 12px;
  margin-bottom: 4px;
}

.footer-disclaimer {
  font-size: 12px;
  opacity: 0.85;
}

/* Product Page Specific Styles */
.product-container {
  max-width: 1200px;
  margin: 30px auto;
  padding: 20px;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 12px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
}

.back-button {
  display: inline-flex;
  align-items: center;
  padding: 8px 16px;
  background-color: rgba(30, 30, 30, 0.85);
  color: #BABABA;
  text-decoration: none;
  border-radius: 2px;
  font-family: 'Barlow', sans-serif;
  font-weight: 500;
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 0.3px;
  margin-bottom: 20px;
  transition: background-color 0.3s ease, opacity 0.3s ease;
}

.back-button:hover {
  color: #005fa3;
  background-color: #3B3B3B;
  opacity: 0.85;
}

/* LIST VIEW STYLES */
.product-list-view {
  display: flex;
  flex-direction: column;
  gap: 15px;
}

.product-list-item {
  display: flex;
  align-items: center;
  background: #fff;
  border-radius: 12px;
  padding: 12px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.product-list-item:hover {
  transform: translateY(-3px);
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
}

.product-list-image {
  width: 150px;
  height: 275px;
  object-fit: cover;
  border-radius: 8px;
  margin-right: 15px;
}

.product-list-info {
  flex: 1;
}

.product-list-title {
  font-family: 'Inter', sans-serif;
  font-weight: 300;
  font-size: 0.95em;
  color: #333;
  margin: 10 10 15px 0;
  line-height: 1.3;
}

.product-list-price {
  font-family: 'Inter', sans-serif;
  font-weight: 500;
  font-size: 0.95em;
  color: #ffcc00;
  margin: 0 0 8px 0;
}

.product-list-actions {
  display: flex;
  gap: 10px;
}

.product-list-buy, .product-list-share {
  padding: 6px 12px;
  background-color: rgba(30, 30, 30, 0.85);
  color: #BABABA;
  text-decoration: none;
  border-radius: 2px;
  transition: background-color 0.3s ease, opacity 0.3s ease;
  border: none;
  cursor: pointer;
  font-family: 'Barlow', sans-serif;
  font-weight: 500;
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 0.3px;
}

.product-list-buy:hover, .product-list-share:hover {
  color: #005fa3;
  background-color: #3B3B3B;
  opacity: 0.85;
}

.loading-message {
  text-align: center;
  padding: 60px 20px;
  font-family: 'Inter', sans-serif;
  font-size: 18px;
  color: #BABABA;
}

.error-message {
  text-align: center;
  padding: 60px 20px;
  font-family: 'Inter', sans-serif;
  font-size: 18px;
  color: #ff6b6b;
}

.loading-spinner {
  display: inline-block;
  width: 20px;
  height: 20px;
  border: 3px solid rgba(255,255,255,.3);
  border-radius: 50%;
  border-top-color: #fff;
  animation: spin 1s ease-in-out infinite;
  margin-right: 10px;
  vertical-align: middle;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

.similar-products {
  margin-top: 40px;
}

.section-title {
  font-family: 'Inter', sans-serif;
  font-weight: 300;
  font-size: 0.95em;
  color: #BABABA;
  margin-bottom: 15px;
  text-align: center;
  position: relative;
  padding-bottom: 10px;
}

.section-title:after {
  content: "";
  position: absolute;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 50px;
  height: 1px;
  background-color: #BDB9B9;
  opacity: 0.5;
}

/* View Toggle Styles */
.view-toggle {
  display: flex;
  justify-content: flex-end;
  margin-bottom: 15px;
  gap: 10px;
}

.view-toggle-btn {
  background: rgba(30, 30, 30, 0.85);
  border: none;
  padding: 8px 12px;
  border-radius: 4px;
  cursor: pointer;
  color: #BABABA;
  font-family: 'Barlow', sans-serif;
  font-size: 12px;
  transition: all 0.3s ease;
}

.view-toggle-btn.active {
  background: #ffcc00;
  color: #000;
}

.view-toggle-btn:hover {
  background: #3B3B3B;
}

/* Grid view (hidden by default) */
.products-grid {
  display: none;
  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
  gap: 5px;
}

.product-card {
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  align-items: center;
  padding: 6px;
  width: 100%;
  max-width: 420px;
  background: #fff;
  border-radius: 12px;
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.12);
  box-sizing: border-box;
  aspect-ratio: 3 / 5;
  overflow: hidden;
  margin: 0 auto;
}

.product-card-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 8px;
}

.product-card-info {
  padding: 0;
  width: 100%;
}

.product-card-title {
  font-family: 'Inter', sans-serif;
  font-weight: 300;
  font-size: 0.95em;
  color: #BABABA;
  margin-top: 15px;
  line-height: 1.1;
  text-align: center;
  max-width: 90%;
  margin: 0 auto;
}

.product-card-price {
  font-family: 'Inter', sans-serif;
  font-weight: 300;
  font-size: 0.95em;
  color: #BABABA;
  text-align: center;
  margin: 10px 0;
}

.product-card-actions {
  padding: 0;
  width: 100%;
}

.product-card-link {
  display: block;
  margin-top: 5px;
  padding: 8px 18px 8px 0;
  background-color: rgba(30, 30, 30, 0.85);
  color: #BABABA;
  text-decoration: none;
  border-radius: 2px;
  transition: background-color 0.3s ease, opacity 0.3s ease;
  text-align: center;
  font-family: 'Barlow', sans-serif;
  font-weight: 500;
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 0.3px;
}

.product-card-link:hover {
  color: #005fa3;
  background-color: #3B3B3B;
  opacity: 0.85;
}

.spacer {
  height: 15px;
}
</style>
</head>
<body>
<div class="wrapper">
  <!-- Header -->
  <header class="top-banner layout-container">
    <div class="header-left">
      <img src="https://i.imgur.com/hp0QbkV.jpeg" alt="ShareDukaan Logo" class="logo">
    </div>
    <div class="header-right">
      <p class="tagline">Discover The Best Shoes & Accessories – All in One Place | Shop Smart!!</p>
      <a href="https://t.me/sharedukaan" class="telegram-link">For daily updates 👉 Telegram</a>
    </div>
  </header>

  <!-- Navigation -->
  <nav class="nav-bar layout-container" role="navigation" aria-label="Main site navigation">
    <ul class="nav-list">
      <li>
        <a href="index.html" class="nav-btn">
          <img src="assets/Home_P.png" alt="Explore" width="40" height="40" />
          <span class="nav-text">Explore</span>
        </a>
      </li>

      <li><span class="nav-separator">|</span></li>
      <li>
        <a href="forhim.html" class="nav-btn">
          <img src="assets/Men_P.png" alt="For Him" width="40" height="40" />
          <span class="nav-text">For Him</span>
        </a>
      </li>

      <li><span class="nav-separator">|</span></li>
      <li>
        <a href="forher.html" class="nav-btn">
          <img src="assets/Women_P.png" alt="For Her" width="40" height="40" />
          <span class="nav-text">For Her</span>
        </a>
      </li>

      <li><span class="nav-separator">|</span></li>
      <li><a href="https://shoedukaan.blogspot.com" class="nav-btn">Blog >></a></li>
    </ul>
  </nav>

  <!-- Product Content -->
  <main class="layout-container">
    <a href="index.html" class="back-button">← Back to Home</a>
    
    <div class="view-toggle">
      <button class="view-toggle-btn active" id="listViewBtn">List View</button>
      <button class="view-toggle-btn" id="gridViewBtn">Grid View</button>
    </div>
    
    <div class="product-container">
      <div id="productLoading" class="loading-message">
        <span class="loading-spinner"></span> Loading product details...
      </div>
      
      <div id="productError" class="error-message" style="display: none;">
        Product not found. Please check the URL or return to the homepage.
      </div>
      
      <div id="productList" class="product-list-view" style="display: none;">
        <!-- Product list will be inserted here by JavaScript -->
      </div>
      
      <div id="productGrid" class="products-grid" style="display: none;">
        <!-- Product grid will be inserted here by JavaScript -->
      </div>
    </div>
    
    <div class="similar-products">
      <h2 class="section-title">You Might Also Like</h2>
      <div id="similarProducts" class="product-list-view">
        <!-- Similar products will be inserted here by JavaScript -->
      </div>
    </div>
  </main>
</div>

<!-- Back to Top Button -->
<button id="backToTop" title="Back to Top">Top</button>

<!-- Footer -->
<footer class="footer-banner">
  <div class="layout-container">
    <div class="footer-content">
      <p class="footer-tagline">Inspired by Google Keep's brilliant simplicity</p>
      <p class="footer-branding">© 2025 ShareDukaan. All rights reserved.</p>
      <p class="footer-disclaimer">
        Disclaimer: ShareDukaan is a participant in the Amazon Associates Program. We may earn a small commission when you purchase through affiliate links, at no extra cost to you. Product prices and availability are subject to change. The actual product may differ slightly from the images shown above.
      </p>
    </div>
  </div>
</footer>

<!-- JavaScript -->
<script>
  // Utility function to escape quotes
  function escapeQuotes(str) {
    return String(str).replace(/"/g, '&quot;');
  }

  // Get URL parameters
  function getUrlParams() {
    const params = new URLSearchParams(window.location.search);
    return {
      permanentId: params.get('permanentId'),
      source: params.get('source')
    };
  }

  // Load product details
  async function loadProductDetail() {
    const { permanentId, source } = getUrlParams();
    
    if (!permanentId) {
      showError();
      return;
    }
    
    try {
      const sheetID = "1z06jsVC54KkbyH_X3oGwmChEPyP1jrMl625LV5VP7Uw";
      const categories = ['links', 'for-him', 'for-her'];
      
      let product = null;
      
      // Search for the product in all categories
      for (const category of categories) {
        // Using the correct URL structure for GitHub Pages
        const url = `https://opensheet.elk.sh/${sheetID}/${category}`;
        console.log(`Fetching from: ${url}`);
        
        const res = await fetch(url);
        
        if (!res.ok) {
          console.error(`Failed to fetch ${category} category: ${res.status}`);
          continue;
        }
        
        const data = await res.json();
        console.log(`Found ${data.length} products in ${category} category`);
        
        const foundProduct = data.find(item => item.permanentId === permanentId);
        
        if (foundProduct) {
          console.log("Product found:", foundProduct);
          product = { ...foundProduct, category };
          break;
        }
      }
      
      if (product) {
        displayProduct(product);
        loadSimilarProducts(product.category, permanentId);
      } else {
        console.error("Product not found in any category");
        showError();
      }
    } catch (err) {
      console.error("Failed to load product:", err);
      showError();
    }
  }
  
  // Display product in list view
  function displayProduct(product) {
    const productList = document.getElementById('productList');
    const productGrid = document.getElementById('productGrid');
    const productLoading = document.getElementById('productLoading');
    
    // Hide loading, show product list
    productLoading.style.display = 'none';
    productList.style.display = 'flex';
    
    // Create product HTML for list view
    const imageArray = product.img ? product.img.split(',') : [];
    const firstImage = imageArray.length > 0 ? imageArray[0].trim() : 'https://via.placeholder.com/80x80?text=No+Image';
    
    const productHTML = `
      <div class="product-list-item">
        <img src="${firstImage}" alt="${product.title || 'Product Image'}" class="product-list-image">
        <div class="product-list-info">
          <h3 class="product-list-title">${product.title || 'Unknown Product'}</h3>
          ${product.price ? `<div class="product-list-price">${product.price}</div>` : ''}
          ${product.description ? `<div class="product-list-description">${product.description}</div>` : ''}
        </div>
        <div class="product-list-actions">
          <a href="${product.link || '#'}" target="_blank" class="product-list-buy">👉 Buy Now</a>
          <button class="product-list-share" onclick="shareProduct()">📤 Share</button>
        </div>
      </div>
    `;
    
    productList.innerHTML = productHTML;
    
    // Also create grid view (hidden by default)
    const gridHTML = `
      <div class="product-card">
        <img src="${firstImage}" alt="${product.title || 'Product Image'}" class="product-card-image">
        <div class="spacer"></div>
        <h3 class="product-card-title">${product.title || 'Unknown Product'}</h3>
        ${product.price ? `<div class="product-card-price">${product.price}</div>` : ''}
        <div class="product-card-actions">
          <a href="${product.link || '#'}" target="_blank" class="product-card-link">👉👉 Buy Now</a>
        </div>
      </div>
    `;
    
    productGrid.innerHTML = gridHTML;
    
    // Update page title
    document.title = `${product.title || 'Product'} | ShoeDukaan`;
  }
  
  // Load similar products
  async function loadSimilarProducts(category, excludeId) {
    try {
      const sheetID = "1z06jsVC54KkbyH_X3oGwmChEPyP1jrMl625LV5VP7Uw";
      const url = `https://opensheet.elk.sh/${sheetID}/${category}`;
      const res = await fetch(url);
      
      if (!res.ok) {
        console.error(`Failed to fetch similar products: ${res.status}`);
        return;
      }
      
      const data = await res.json();
      // Filter out the current product and get 4 random products
      const similarProducts = data
        .filter(item => item.permanentId !== excludeId && item.title && item.img && item.link)
        .sort(() => 0.5 - Math.random())
        .slice(0, 4);
      
      displaySimilarProducts(similarProducts);
    } catch (err) {
      console.error("Failed to load similar products:", err);
    }
  }
  
  // Display similar products in list view
  function displaySimilarProducts(products) {
    const similarProductsContainer = document.getElementById('similarProducts');
    
    if (products.length === 0) {
      similarProductsContainer.innerHTML = '<p class="product-list-title">No similar products found.</p>';
      return;
    }
    
    const productsHTML = products.map(product => {
      const imageArray = product.img ? product.img.split(',') : [];
      const firstImage = imageArray.length > 0 ? imageArray[0].trim() : 'https://via.placeholder.com/80x80?text=No+Image';
      
      return `
        <div class="product-list-item">
          <img src="${firstImage}" alt="${product.title}" class="product-list-image">
          <div class="product-list-info">
            <h3 class="product-list-title">${product.title}</h3>
            ${product.price ? `<div class="product-list-price">${product.price}</div>` : ''}
          </div>
          <div class="product-list-actions">
            <a href="product.html?permanentId=${product.permanentId}" class="product-list-buy">View Details</a>
          </div>
        </div>
      `;
    }).join('');
    
    similarProductsContainer.innerHTML = productsHTML;
  }
  
  // Show error message
  function showError() {
    const productLoading = document.getElementById('productLoading');
    const productError = document.getElementById('productError');
    
    productLoading.style.display = 'none';
    productError.style.display = 'block';
  }
  
  // Share product function
  async function shareProduct() {
    const { permanentId, source } = getUrlParams();
    const productTitle = document.querySelector('.product-list-title')?.textContent || 'Check out this product';
    
    // Using the correct GitHub Pages URL structure
    const productPageUrl = `https://sharedukaan.github.io/shdknlinks/product.html?permanentId=${permanentId}&source=${source || 'direct'}`;
    
    const shareData = {
      title: productTitle,
      text: `Check out ${productTitle} on ShoeDukaan!`,
      url: productPageUrl
    };
    
    if (navigator.share) {
      try {
        await navigator.share(shareData);
      } catch (error) {
        if (error.name !== 'AbortError') {
          copyToClipboard(productPageUrl, productTitle);
        }
      }
    } else {
      copyToClipboard(productPageUrl, productTitle);
    }
  }
  
  // Fallback function to copy to clipboard
  function copyToClipboard(text, productTitle) {
    navigator.clipboard.writeText(text).then(() => {
      alert(`Link for "${productTitle}" copied to clipboard!`);
    }).catch(err => {
      console.error('Could not copy text: ', err);
      prompt('Copy this URL to share:', text);
    });
  }
  
  // Toggle between list and grid views
  function setupViewToggle() {
    const listViewBtn = document.getElementById('listViewBtn');
    const gridViewBtn = document.getElementById('gridViewBtn');
    const productList = document.getElementById('productList');
    const productGrid = document.getElementById('productGrid');
    
    listViewBtn.addEventListener('click', () => {
      listViewBtn.classList.add('active');
      gridViewBtn.classList.remove('active');
      productList.style.display = 'flex';
      productGrid.style.display = 'none';
    });
    
    gridViewBtn.addEventListener('click', () => {
      gridViewBtn.classList.add('active');
      listViewBtn.classList.remove('active');
      productList.style.display = 'none';
      productGrid.style.display = 'grid';
    });
  }
  
  // Initialize the page
  window.addEventListener("DOMContentLoaded", function() {
    // Load product details
    loadProductDetail();
    
    // Set up view toggle
    setupViewToggle();
    
    // Set up scroll event for back to top button
    window.addEventListener("scroll", () => {
      const scrollY = window.scrollY;
      const backToTopBtn = document.getElementById("backToTop");
      if (backToTopBtn) {
        backToTopBtn.style.display = scrollY > 300 ? "block" : "none";
      }
    });

    // Set up back to top button
    const backToTopBtn = document.getElementById("backToTop");
    if (backToTopBtn) {
      backToTopBtn.addEventListener("click", () => {
        window.scrollTo({ top: 0, behavior: "smooth" });
      });
    }
    
    // Set active navigation link
    document.querySelectorAll('.nav-btn').forEach(link => {
      if (link.href === window.location.href) {
        link.classList.add('active');
      }
    });
  });
</script>
</body>
</html>
