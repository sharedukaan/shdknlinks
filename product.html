<!DOCTYPE a html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ShoeDukaan | Premium Footwear</title>
    <meta name="description" content="Discover the best shoes & accessories â€“ all in one place. Shop smart with our mobile-first catalog and curated product grid.">
    <link rel="canonical" href="https://shdkn.carrd.co">
    <meta name="robots" content="index, follow">
    <link rel="icon" href="shdkn_fav_p.png" type="image/png">
    
    <meta property="og:title" content="ShoeDukaan" />
    <meta property="og:description" content="Discover the best shoes & accessories." />
    <meta property="og:image" content="https://i.imgur.com/hp0QbkV.jpeg" />
    <meta property="og:url" content="https://sharedukaan.github.io/shdknlinks/product.html" />
    <meta property="og:type" content="product" />
    
    <link href="https://fonts.googleapis.com/css2?family=Barlow:wght@500&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@400&display=swap" rel="stylesheet">

    <style>
        :root {
            --max-width: 1440px;
            --side-padding: 18px;
        }

        body {
            overflow-x: hidden;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', sans-serif;
            background: #1c1c1c;
            color: #fff;
            scroll-behavior: smooth;
            text-align: center;
        }

        .layout-container {
            max-width: var(--max-width);
            margin: 0 auto;
            padding: 0 var(--side-padding);
            box-sizing: border-box;
        }

        .product-card {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 16px;
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.12);
            box-sizing: border-box;
            max-width: 450px;
            margin: 40px auto;
            color: #000;
        }

        .product-image {
            width: 100%;
            height: auto;
            aspect-ratio: 3 / 5;
            object-fit: cover;
            border-radius: 8px;
        }

        .product-title {
            font-family: 'Inter', sans-serif;
            font-weight: 300;
            font-size: 1.2em;
            color: #1c1c1c;
            margin-top: 15px;
            line-height: 1.2;
            text-align: center;
            max-width: 90%;
            margin: 15px auto;
        }
        
        .buy-button-wrapper {
            display: flex;
            gap: 10px;
            width: 100%;
            box-sizing: border-box;
            justify-content: center;
        }

        .action-button-text {
            font-family: 'Barlow', sans-serif;
            font-weight: 500;
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.3px;
        }
        
        .buy-button {
            margin-top: 5px;
            padding: 10px 20px;
            background-color: rgba(30, 30, 30, 0.85);
            color: #BABABA;
            text-decoration: none;
            border-radius: 2px;
            transition: background-color 0.3s ease, opacity 0.3s ease;
            border: none;
            cursor: pointer;
            width: 100%;
        }

        .buy-button:hover {
            color: #005fa3;
            background-color: #3B3B3B;
            opacity: 0.85;
        }

        .error-message {
            color: #ff6b6b;
            text-align: center;
            padding: 20px;
            font-family: 'Inter', sans-serif;
        }
        
        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
            margin-right: 10px;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="layout-container">
        <header class="top-banner layout-container">
            <div class="header-left">
                <img src="https://i.imgur.com/hp0QbkV.jpeg" alt="ShareDukaan Logo" class="logo">
            </div>
            <div class="header-right">
                <p class="tagline">Discover The Best Shoes & Accessories â€“ All in One Place | Shop Smart!!</p>
                <a href="https://t.me/sharedukaan" class="telegram-link">For daily updates ðŸ‘‰ Telegram</a>
            </div>
        </header>

        <main id="product-details" class="layout-container">
            <div class="error-message" id="loadingMessage"><span class="loading-spinner"></span> Loading product...</div>
        </main>
    </div>

    <script>
        const sheetID = "1z06jsVC54KkbyH_X3oGwmChEPyP1jrMl625LV5VP7Uw";

        async function loadProductDetails() {
            try {
                const urlParams = new URLSearchParams(window.location.search);
                const permanentId = urlParams.get('permanentId');
                const source = urlParams.get('source');

                if (!permanentId || !source) {
                    document.getElementById('loadingMessage').textContent = 'Product not found. Invalid link.';
                    return;
                }

                const url = `https://opensheet.elk.sh/${sheetID}/${source}`;
                const res = await fetch(url);
                if (!res.ok) {
                    document.getElementById('loadingMessage').textContent = 'Error loading product data.';
                    return;
                }
                const data = await res.json();
                
                const product = data.find(item => String(item.permanentId) === permanentId);

                if (!product) {
                    document.getElementById('loadingMessage').textContent = 'Product not found.';
                    return;
                }

                updateMetaTags(product);
                renderProductCard(product);

            } catch (err) {
                console.error("Failed to load product details:", err);
                document.getElementById('loadingMessage').textContent = 'Error loading product details. Please check your connection.';
            }
        }

        function updateMetaTags(product) {
            document.title = product.title + " | ShoeDukaan";

            const head = document.head || document.getElementsByTagName('head')[0];
            
            const updateMeta = (property, content) => {
                let tag = document.querySelector(`meta[property="${property}"]`);
                if (!tag) {
                    tag = document.createElement('meta');
                    tag.setAttribute('property', property);
                    head.appendChild(tag);
                }
                tag.setAttribute('content', content);
            };

            const imageArray = product.img.split(',');
            const firstImage = imageArray[0].trim();

            updateMeta('og:title', product.title);
            updateMeta('og:description', product.title);
            updateMeta('og:image', firstImage);
            updateMeta('og:url', window.location.href);
            updateMeta('og:type', 'product');

            let canonicalLink = document.querySelector('link[rel="canonical"]');
            if (canonicalLink) {
                canonicalLink.setAttribute('href', window.location.href);
            }
        }

        function renderProductCard(product) {
            const container = document.getElementById("product-details");
            container.innerHTML = `
                <div class="product-card">
                    <img src="${product.img.split(',')[0].trim()}" alt="${product.title}" class="product-image" />
                    <h1 class="product-title">${product.title.replace(/\n/g, '<br>')}</h1>
                    <div class="buy-button-wrapper">
                        <a class="buy-button action-button-text" href="${product.link}" target="_blank">
                            ðŸ‘‰ðŸ‘‰ Buy Now
                        </a>
                    </div>
                </div>
            `;
            // Hide the loading message once content is loaded
            document.getElementById('loadingMessage').style.display = 'none';
        }

        document.addEventListener('DOMContentLoaded', loadProductDetails);
    </script>
</body>
</html>
